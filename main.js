!function(){"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&"SCRIPT"===r.currentScript.tagName.toUpperCase()&&(t=r.currentScript.src),!t)){var n=r.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t}();var o=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorSpanText=t.errorSpanText,this._formElement=r},(t=[{key:"_showInputError",value:function(e,t){this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),this._errorElement.textContent=t,this._errorElement.classList.add(this._errorSpanText),e.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(e){this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorSpanText),this._errorElement.textContent=""}},{key:"_checkValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.classList.add(this._inactiveButtonClass),t.setAttribute("disabled",!0)):(t.classList.remove(this._inactiveButtonClass),t.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(e){var t=this,r=this._formElement.querySelector(this._submitButtonSelector);this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._toggleButtonState(e,r),e.forEach((function(n){t._checkValidity(n),n.addEventListener("input",(function(){t._checkValidity(n),t._toggleButtonState(e,r)}))}))}},{key:"enableValidation",value:function(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._setEventListeners(this._inputList)}}])&&r(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var a=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t)},(t=[{key:"open",value:function(){this._popup.classList.add("popup_opened")}},{key:"close",value:function(){this._popup.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(){var e=this;document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.close()}))}},{key:"setEventListeners",value:function(){var e=this;document.addEventListener("click",(function(t){t.target.classList.contains("popup_opened")&&e.close()})),this._popup.querySelector(".popup__close").addEventListener("click",(function(){e.close()})),this._handleEscClose()}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function y(e,t,r,n){var o=h(m(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},h.apply(null,arguments)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}var d=function(e){function t(e,r){var n,o=e.sendForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,r){return t=m(t),function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,r||[],m(e).constructor):t.apply(e,r))}(this,t,[r]))._sendForm=o,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),r=t,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._popup.querySelectorAll(".form__input"),this._inputValues={},this._inputList.forEach((function(t){e._inputValues[t.name]=t.value})),this._inputValues}},{key:"close",value:function(){y(t,"close",this,3)([]),this._popup.querySelector(".form").reset()}},{key:"setEventListeners",value:function(){var e=this;y(t,"setEventListeners",this,3)([]),this._popup.querySelector(".form__button").addEventListener("click",(function(t){t.preventDefault(),e._sendForm(e._getInputValues()),e.close()}))}}])&&l(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},w.apply(null,arguments)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}var j=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=E(t),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,S()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r))}(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(t,e),r=t,n=[{key:"open",value:function(e){var r,n,o,i=e.place,u=e.image;(r=t,n=this,"function"==typeof(o=w(E(1&3?r.prototype:r),"open",n))?function(e){return o.apply(n,e)}:o)([]),this._popup.querySelector(".popup__image").src=u,this._popup.querySelector(".popup__image").alt="Imagen de ".concat(i),this._popup.querySelector(".popup__place").textContent=i}}],n&&_(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function L(e){var t=function(e){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function T(e,t,r,n){var o=q(x(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},q.apply(null,arguments)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var B=function(e){function t(e,r){var n,o=r.deleteFunction;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,r){return t=x(t),function(e,t){if(t&&("object"==P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,C()?Reflect.construct(t,r||[],x(e).constructor):t.apply(e,r))}(this,t,[e]))._delete=o,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),r=t,(n=[{key:"open",value:function(e){T(t,"open",this,3)([]),this._element=e.parentNode}},{key:"setEventListeners",value:function(){var e=this;T(t,"setEventListeners",this,3)([]),this._popup.querySelector(".form__button").addEventListener("click",(function(){e._element.remove(),e._delete(e._element.id),e.close()}))}}])&&O(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N(n.key),n)}}function N(e){var t=function(e){if("object"!=U(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==U(t)?t:t+""}var A=function(){return e=function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=n,this._renderer=o,this._container=document.querySelector(r)},(t=[{key:"renderItems",value:function(){var e=this;this._initialArray.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.append(e)}},{key:"clear",value:function(){this._container.innerHTML=""}}])&&R(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function F(e){var t=function(e){if("object"!=V(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}var J=function(){return e=function e(t){var r=t.userName,n=t.userJob;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=r,this._userJob=n},(t=[{key:"getUserInfo",value:function(){return this._info={name:this._userName.textContent,job:this._userJob.textContent},this._info}},{key:"setUserInfo",value:function(e,t){this._userName.textContent=e,this._userJob.textContent=t}}])&&D(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function M(e){var t=function(e){if("object"!=H(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}var z=new(function(){return e=function e(t){var r=t.baseUrl,n=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=r,this._headers=n},(t=[{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"editUserInfo",value:function(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addNewCard",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"changeProfilePicture",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"removeLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}())({baseUrl:"https://around.nomoreparties.co/v1/web-es-cohort-17",headers:{authorization:"f05ef4e2-b711-4c0d-bffb-160d98715bd3","Content-Type":"application/json"}});function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q(n.key),n)}}function Q(e){var t=function(e){if("object"!=G(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:t+""}var W=function(){return e=function e(t,r){var n=t.text,o=t.image,i=t.handleCardClick,u=t.handleLike;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=n,this._image=o,this._handleCardClick=i,this._handleLike=u,this._cardSelector=r},(t=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".photos__card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".photos__image").src=this._image,this._element.querySelector(".photos__image").alt="Imagen de ".concat(this._text),this._element.querySelector(".photos__place").textContent=this._text,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".photos__like").addEventListener("click",(function(t){e._handleLikeButton(t)})),this._element.querySelector(".photos__image").addEventListener("click",(function(){e._handleCardClick()}))}},{key:"_handleLikeButton",value:function(e){e.target.classList.toggle("photos__like_active"),this._handleLike(e)}}])&&K(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),X=e.p+"a49220258e0429516be4.png";function Y(e,t,r,n){return new W({text:e,image:t,handleCardClick:function(){r.open({place:e,image:t})},handleLike:function(e){e.target.classList.contains("photos__like_active")?te({request:z.addLike(n),handler:function(t){e.target.nextElementSibling.textContent=t.likes.length}}):te({request:z.removeLike(n),handler:function(t){e.target.nextElementSibling.textContent=t.likes.length}})}},"#cards")}function Z(e,t){"bbec80a71f167775eb90ff6c"===e.owner._id&&(t.querySelector(".photos__trash").src=X)}function ee(e,t){t.querySelector(".photos__like-number").textContent=e.likes.length,e.likes.some((function(e){return"bbec80a71f167775eb90ff6c"===e._id}))&&t.querySelector(".photos__like").classList.add("photos__like_active")}function te(e){var t=e.request,r=e.handler;return t.then((function(e){return r(e)})).catch((function(e){console.log(e)}))}var re=document.querySelector(".profile__edit"),ne=document.querySelector(".profile__add"),oe=document.querySelector(".profile__image-user"),ie=document.querySelector(".form__input_type_name"),ue=document.querySelector(".form__input_type_job"),ce=document.querySelector(".profile__name"),ae=document.querySelector(".profile__hobby"),se=Array.from(document.querySelectorAll(".form")),le={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_inactive",inputErrorClass:"form__input_type_error",errorSpanText:"form__input-error_active"},fe=[];te({request:z.getUserInfo(),handler:function(e){ce.textContent=e.name,ae.textContent=e.about,oe.onload,oe.src=e.avatar}});var pe=new j("#popup-image");pe.setEventListeners(),te({request:z.getInitialCards(),handler:function(e){var t=new A({items:e,renderer:function(e){var r=Y(e.name,e.link,pe,e._id).generateCard();ee(e,r),Z(e,r),r.id=e._id,t.addItem(r)}},".photos");return t}}).then((function(e){e.renderItems()})),se.forEach((function(e,t){fe[t]=new o(le,e)}));var ye=new J({userName:ce,userJob:ae}),he=new d({sendForm:function(e){te({request:z.editUserInfo(e.name,e.about),handler:function(e){ye.setUserInfo(e.name,e.about)}})}},"#popup-profile");he.setEventListeners(),re.addEventListener("click",(function(){var e=ye.getUserInfo();ie.value=e.name,ue.value=e.job,he.open(),fe[0].enableValidation()}));var me=new d({sendForm:function(e){te({request:z.addNewCard(e.name,e.link),handler:function(e){var t=Y(e.name,e.link,pe).generateCard();ee(cardItem,t),Z(e,t),document.querySelector(".photos").prepend(t)}})}},"#popup-add");me.setEventListeners(),ne.addEventListener("click",(function(){me.open(),fe[1].enableValidation()}));var be=new B("#popup-delete",{deleteFunction:function(e){te({request:z.deleteCard(e),handler:function(e){console.log(e)}})}});be.setEventListeners(),document.addEventListener("click",(function(e){"photos__trash"==e.target.classList&&be.open(e.target)}));var de=new d({sendForm:function(e){te({request:z.changeProfilePicture(e.user),handler:function(){oe.src=e.user}})}},"#popup-user");de.setEventListeners(),oe.parentNode.addEventListener("click",(function(){de.open(),fe[2].enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UixJQUtNMUMsRUFMVVosRUFDZHNELEVBQVkzSCxLQUNaMkgsRUFBWXhFLEtBQ1pxRCxJQUUwQkssZUFFNUJ4QixHQUFlTCxTQUFVQyxHQUN6QkYsRUFBaUI0QyxFQUFhMUMsR0FFOUJqSyxTQUFTaUMsY0FBYyxXQUFXMkssUUFBUTNDLEVBQzVDLEdBRUosR0FFRixjQUVGd0MsR0FBYWhCLG9CQUNiYixHQUFleEgsaUJBQWlCLFNBQVMsV0FDdkNxSixHQUFhbEQsT0FFYjZCLEdBQWUsR0FBR29CLGtCQUNwQixJQUdBLElBQU1LLEdBQWtCLElBQUlwSCxFQUFzQixnQkFBaUIsQ0FDakVDLGVBQWdCLFNBQUN2RCxHQUNmcUgsR0FBb0IsQ0FDbEJDLFFBQVN6QyxFQUFJOEYsV0FBVzNLLEdBQ3hCd0gsUUFBUyxTQUFDbkMsR0FDUmlELFFBQVFDLElBQUlsRCxFQUNkLEdBRUosSUFFRnFGLEdBQWdCcEIsb0JBRWhCekwsU0FBU29ELGlCQUFpQixTQUFTLFNBQUNDLEdBQ04saUJBQXhCQSxFQUFJZSxPQUFPL0IsV0FDYndLLEdBQWdCdEQsS0FBS2xHLEVBQUllLE9BRTdCLElBR0EsSUFBTTJJLEdBQWlCLElBQUl4SSxFQUN6QixDQUNFRyxTQUFVLFNBQUN5SCxHQUNUM0MsR0FBb0IsQ0FDbEJDLFFBQVN6QyxFQUFJZ0cscUJBQXFCYixFQUFZYyxNQUM5Q3RELFFBQVMsV0FDUGtCLEdBQVV6SyxJQUFNK0wsRUFBWWMsSUFDOUIsR0FFSixHQUVGLGVBRUZGLEdBQWV0QixvQkFDZlosR0FBVS9FLFdBQVcxQyxpQkFBaUIsU0FBUyxXQUM3QzJKLEdBQWV4RCxPQUVmNkIsR0FBZSxHQUFHb0Isa0JBQ3BCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdCAmJiBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnRhZ05hbWUudG9VcHBlckNhc2UoKSA9PT0gJ1NDUklQVCcpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7XG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkge1xuXHRcdFx0dmFyIGkgPSBzY3JpcHRzLmxlbmd0aCAtIDE7XG5cdFx0XHR3aGlsZSAoaSA+IC0xICYmICghc2NyaXB0VXJsIHx8ICEvXmh0dHAocz8pOi8udGVzdChzY3JpcHRVcmwpKSkgc2NyaXB0VXJsID0gc2NyaXB0c1tpLS1dLnNyYztcblx0XHR9XG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZ0RhdGEsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnRGF0YS5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWdEYXRhLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZ0RhdGEuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZ0RhdGEuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JTcGFuVGV4dCA9IGNvbmZpZ0RhdGEuZXJyb3JTcGFuVGV4dDtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvLyBNdWVzdHJhIGVsIG1lbnNhamUgZGUgZXJyb3IgeSBjYW1iaWEgbG9zIGVzdGlsb3MgZGVsIGNhbXBvIGRlIGVudHJhZGFcclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yU3BhblRleHQpO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIC8vIEVzY29uZGUgZWwgbWVuc2FqZSBkZSBlcnJvciB5IHJldGlyYSBsb3MgZXN0aWxvcyBkZWwgY2FtcG8gZGUgZW50cmFkYVxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvclNwYW5UZXh0KTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGEgZWwgY2FtcG8gZGUgZW50cmFkYSB5IG11ZXN0cmEgc2kgZXMgdsOhbGlkbyBvIGludsOhbGlkb1xyXG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYSB0b2RhIGxhIGxpc3RhIGRlIGNhbXBvcyBkZSBlbnRyYWRhIHkgZGV2dWVsdmUgc2kgYWxndW5hIGVzIGludsOhbGlkYVxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2FtYmlhIGVsIGVzdGFkbyBkZSBTdWJtaXQgZW4gY2FzbyBkZSB0ZW5lciB1biBjYW1wbyBkZSBlbnRyYWRhIGludsOhbGlkb1xyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIHN1Ym1pdEJ1dHRvbikge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICBzdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgc3VibWl0QnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQcOxYWRlIGNvbnRyb2xhZG9yZXMvZGV0ZWN0b3JlcyBkZSBldmVudG8gYSBjYWRhIGlucHV0XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKGlucHV0TGlzdCkge1xyXG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBzdWJtaXRCdXR0b24pO1xyXG5cclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5fY2hlY2tWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBzdWJtaXRCdXR0b24pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJvcG9yY2lvbmEgbG9zIGRldGVjdG9yZXMgZGUgZXZlbnRvcyBhbCBmb3JtdWxhcmlvIHkgZ2VuZXJhIHVuIGFycmF5IGRlIGxvcyBjYW1wb3MgZGUgZW50cmFkYVxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKHRoaXMuX2lucHV0TGlzdCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIC8vIEHDsWFkZSBjbGFzZSBwYXJhIHZpc3VhbGl6YXIgUG9wVXBcbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICB9XG5cbiAgLy8gRWxpbWluYSBjbGFzZSBwYXJhIG9jdWx0YXIgUG9wVXBcbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgfVxuXG4gIC8vIERldGVjdG9yIGRlIGV2ZW50b3MgcGFyYSBib3TDs24gRVNDIHBhcmEgY2VycmFyIFBvcFVwXG4gIF9oYW5kbGVFc2NDbG9zZSgpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBBw7FhZGUgZGV0ZWN0b3JlcyBkZSBldmVudG9zXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuZWRcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gw41jb25vIHBhcmEgY2VycmFyIFBvcFVwXG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHNlbmRGb3JtIH0sIHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc2VuZEZvcm0gPSBzZW5kRm9ybTtcclxuICB9XHJcblxyXG4gIC8vIFJlY29waWxhIGxvcyBkYXRvcyBkZSBsb3MgaW5wdXRzXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX2lucHV0VmFsdWVzID0ge307XHJcblxyXG4gICAgLy8gQWdydXBhIGxvcyBpbnB1dHMgZW4gdW5hIGxpc3RhIHkgYcOxYWRlIHN1cyB2YWxvcmVzIGVuIHVuIG9iamV0byB2YWPDrW9cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgLy8gQcOxYWRlIGFsIG3DqXRvZG8gcGFkcmUgdW4gcmVzZXRlbyBkZSBmb3JtdWxhcmlvXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICAvLyBBw7FhZGUgYWwgbcOpdG9kbyBwYWRyZSBsb3Mgc2lndWllbnRlcyBkZXRlY3RvcmVzIGRlIGV2ZW50b3M6XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIC8vIEVzdGFibGVjZSBjb21wb3J0YW1pZW50byBkZSBTdWJtaXRcclxuICAgIHRoaXMuX3BvcHVwXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2J1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLl9zZW5kRm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IHBsYWNlLCBpbWFnZSB9KSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKS5zcmMgPSBpbWFnZTtcclxuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpLmFsdCA9IGBJbWFnZW4gZGUgJHtwbGFjZX1gO1xyXG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGxhY2VcIikudGV4dENvbnRlbnQgPSBwbGFjZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgeyBkZWxldGVGdW5jdGlvbiB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2RlbGV0ZSA9IGRlbGV0ZUZ1bmN0aW9uO1xyXG4gIH1cclxuXHJcbiAgLy8gQWJyZSBQb3BVcCB5IHJlY2liZSBlbCBldnQudGFyZ2V0IGRlbCBlbGVtZW50bywgcGFyYSBhY2NlZGVyIGEgc3Ugbm9kbyBwYWRyZVxyXG4gIG9wZW4oZWxlbWVudCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuICB9XHJcblxyXG4gIC8vIEHDsWFkZSBkZXRlY3RvciBkZSBldmVudG9zIGFsIGJvdMOzbiBwYXJhIGJvcnJhciBlbGVtZW50b1xyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2J1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICB0aGlzLl9kZWxldGUodGhpcy5fZWxlbWVudC5pZCk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faW5pdGlhbEFycmF5ID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvLyBNw6l0b2RvIHBhcmEgaXRlcmFyIGVuIGVsIGFycmF5IGRlIGVsZW1lbnRvcyB5IHBhc2FybG9zIHNvYnJlIGZ1bmNpw7NuXHJcbiAgLy8gZGVsIGNvbnN0cnVjdG9yLCBwYXJhIGRlc3B1w6lzIGFncmVnYXJsb3MgYWwgRE9NLlxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faW5pdGlhbEFycmF5LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIE3DqXRvZG8gcGFyYSBhZ3JlZ2FyIGxvcyBlbGVtZW50b3MgYWwgRE9NXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBhZGljaW9uYWwgcGFyYSBsaW1waWFyIGVsIGNvbnRlbmVkb3JcclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZSwgdXNlckpvYiB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgdGhpcy5fdXNlckpvYiA9IHVzZXJKb2I7XHJcbiAgfVxyXG5cclxuICAvLyBHZW5lcmEgb2JqZXRvIGNvbiBpbmZvcm1hY2nDs24gYWN0dWFsIGRlbCB1c3VhcmlvXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICB0aGlzLl9pbmZvID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl91c2VySm9iLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5faW5mbztcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGpvYikge1xyXG4gICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCA9IGpvYjtcclxuICB9XHJcbn1cclxuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIC8vIEZ1bmNpw7NuIFByb21pc2UgcGFyYSBvYnRlbmVyIGluZm9ybWFjacOzbiBpbmljaWFsIGRlIHVzdWFyaW8gZGVsIHNlcnZpZG9yXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KS50aGVuKFxuICAgICAgKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8vIEZ1bmNpw7NuIFByb21pc2UgcGFyYSBvYnRlbmVyIGNhcnRhcyBpbmljaWFsZXMgZGVsIHNlcnZpZG9yXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSkudGhlbihcbiAgICAgIChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvL0Z1bmNpw7NuIFByb21pc2UgcGFyYSBlZGl0YXIgaW5mb3JtYWNpw7NuIGRlIHVzdWFyaW9cbiAgZWRpdFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBhYm91dDogYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEZ1bmNpw7NuIFByb21pc2UgcGFyYSBhw7FhZGlyIG51ZXZhIHRhcmpldGFcbiAgYWRkTmV3Q2FyZChuYW1lLCBsaW5rKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGxpbms6IGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEZ1bmNpw7NuIFByb21pc2UgcGFyYSBib3JyYXIgdGFyamV0YVxuICBkZWxldGVDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEZ1bmNpw7NuIFByb21pc2UgcGFyYSBjYW1iaWFyIGZvdG8gZGUgcGVyZmlsIGRlIHVzdWFyaW9cbiAgY2hhbmdlUHJvZmlsZVBpY3R1cmUoYXZhdGFyKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBhdmF0YXIsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEZ1bmNpw7NuIFByb21pc2UgcGFyYSBhw7FhZGlyIExpa2UgYSBsYSBwdWJsaWNhY2nDs25cbiAgYWRkTGlrZShpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBGdW5jacOzbiBwYXJhIGJvcnJhciBMaWtlIGEgbGEgcHVibGljYWNpw7NuXG4gIHJlbW92ZUxpa2UoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG59XG5cbi8vIENyZWFjacOzbiBkZSBpbnN0YW5jaWEgZGUgQXBpIHBhcmEgc29saWNpdHVkZXMgYSBzZXJ2aWRvclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViLWVzLWNvaG9ydC0xN1wiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJmMDVlZjRlMi1iNzExLTRjMGQtYmZmYi0xNjBkOTg3MTViZDNcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuIiwiLy8gQ2xhc2UgQ2FyZCBwYXJhIGdlbmVyYWNpw7NuIGRlIGltw6FnZW5lc1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgdGV4dCwgaW1hZ2UsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlTGlrZSB9LCBjYXJkU2VsZWN0b3IpIHtcbiAgICB0aGlzLl90ZXh0ID0gdGV4dDtcbiAgICB0aGlzLl9pbWFnZSA9IGltYWdlO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlID0gaGFuZGxlTGlrZTtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gIH1cblxuICAvLyBHZW5lcmEgbGEgcGxhbnRpbGxhIHBhcmEgY2FkYSBpbnN0YW5jaWEgZGUgbGEgY2xhc2UgeSBsYSByZWdyZXNhXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5waG90b3NfX2NhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZFRlbXBsYXRlO1xuICB9XG5cbiAgLy8gUmVsbGVuYSBsYSBwbGFudGlsbGEgZGUgbGEgaW5zdGFuY2lhIGNvbiBsYSBpbmZvcm1hY2nDs24gbmVjZXNhcmlhIHkgbGEgcmVncmVzYVxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90b3NfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2ltYWdlO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBob3Rvc19faW1hZ2VcIlxuICAgICkuYWx0ID0gYEltYWdlbiBkZSAke3RoaXMuX3RleHR9YDtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zX19wbGFjZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX3RleHQ7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIC8vIERldGVjdG9yZXMgZGUgZXZlbnRvcyBwYXJhIGxhcyBpbnN0YW5jaWFzIGRlIGNsYXNlXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5waG90b3NfX2xpa2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKGV2dCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvc19faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy8gRnVuY2lvbmFsaWRhZCBkZWwgYm90w7NuIExpa2VcbiAgX2hhbmRsZUxpa2VCdXR0b24oZXZ0KSB7XG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwicGhvdG9zX19saWtlX2FjdGl2ZVwiKTtcbiAgICB0aGlzLl9oYW5kbGVMaWtlKGV2dCk7XG4gIH1cbn1cbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB0cmFzaEljb24gZnJvbSBcIi4uL2ltYWdlcy90cmFzaC5wbmdcIjtcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG4vLyBGdW5jacOzbiBwYXJhIGNyZWFjacOzbiBkZSBpbnN0YW5jaWFzIGRlIGNsYXNlIENhcmRcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQobmFtZSwgbGluaywgcG9wdXBJbnN0YW5jZSwgaWQpIHtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIHRleHQ6IG5hbWUsXG4gICAgICBpbWFnZTogbGluayxcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xuICAgICAgICBwb3B1cEluc3RhbmNlLm9wZW4oe1xuICAgICAgICAgIHBsYWNlOiBuYW1lLFxuICAgICAgICAgIGltYWdlOiBsaW5rLFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVMaWtlOiAoZXZ0KSA9PiB7XG4gICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBob3Rvc19fbGlrZV9hY3RpdmVcIikpIHtcbiAgICAgICAgICBoYW5kbGVTZXJ2ZXJSZXF1ZXN0KHtcbiAgICAgICAgICAgIHJlcXVlc3Q6IGFwaS5hZGRMaWtlKGlkKSxcbiAgICAgICAgICAgIGhhbmRsZXI6IChyZXMpID0+IHtcbiAgICAgICAgICAgICAgZXZ0LnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoYW5kbGVTZXJ2ZXJSZXF1ZXN0KHtcbiAgICAgICAgICAgIHJlcXVlc3Q6IGFwaS5yZW1vdmVMaWtlKGlkKSxcbiAgICAgICAgICAgIGhhbmRsZXI6IChyZXMpID0+IHtcbiAgICAgICAgICAgICAgZXZ0LnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9LFxuICAgIFwiI2NhcmRzXCJcbiAgKTtcbiAgcmV0dXJuIG5ld0NhcmQ7XG59XG5cbi8vIEZ1bmNpw7NuIHBhcmEgYWdyZWdhciBvcGNpw7NuIGRlIGJvcnJhciBhIGluc3RhY2lhcyBDYXJkIHByb3BpYXNcbmZ1bmN0aW9uIGFzc2lnbkRlbGV0ZUljb24oY2FyZEl0ZW0sIGNhcmRFbGVtZW50KSB7XG4gIGlmIChjYXJkSXRlbS5vd25lci5faWQgPT09IFwiYmJlYzgwYTcxZjE2Nzc3NWViOTBmZjZjXCIpIHtcbiAgICBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvc19fdHJhc2hcIikuc3JjID0gdHJhc2hJY29uO1xuICB9XG59XG5cbi8vIEZ1bmNpw7NuIHBhcmEgaW5zZXJ0YXIgZWwgbsO6bWVybyBkZSBMaWtlcyBkZXNkZSBlbCBzZXJ2aWRvclxuZnVuY3Rpb24gYXNzaWduTGlrZUljb24oY2FyZEl0ZW0sIGNhcmRFbGVtZW50KSB7XG4gIGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zX19saWtlLW51bWJlclwiKS50ZXh0Q29udGVudCA9XG4gICAgY2FyZEl0ZW0ubGlrZXMubGVuZ3RoO1xuICBjb25zdCBpc0xpa2VkID0gY2FyZEl0ZW0ubGlrZXMuc29tZShcbiAgICAobGlrZSkgPT4gbGlrZS5faWQgPT09IFwiYmJlYzgwYTcxZjE2Nzc3NWViOTBmZjZjXCJcbiAgKTtcbiAgaWYgKGlzTGlrZWQpXG4gICAgY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvc19fbGlrZVwiKVxuICAgICAgLmNsYXNzTGlzdC5hZGQoXCJwaG90b3NfX2xpa2VfYWN0aXZlXCIpO1xufVxuXG4vLyBGdW5jacOzbiBwYXJhIHByb2Nlc2FyIGxhcyBzb2xpY2l0dWRlcyBkZWwgc2Vydmlkb3JcbmZ1bmN0aW9uIGhhbmRsZVNlcnZlclJlcXVlc3QoeyByZXF1ZXN0LCBoYW5kbGVyIH0pIHtcbiAgcmV0dXJuIHJlcXVlc3RcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gaGFuZGxlcihyZXMpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbmV4cG9ydCB7IGNyZWF0ZUNhcmQsIGFzc2lnbkRlbGV0ZUljb24sIGFzc2lnbkxpa2VJY29uLCBoYW5kbGVTZXJ2ZXJSZXF1ZXN0IH07XG4iLCIvLyBCb3RvbmVzIHBhcmEgZWRpdGFyIHBlcmZpbCB5IGHDsWFkaXIgaW3DoWdlbmVzXHJcbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0XCIpO1xyXG5jb25zdCBhZGRJbWFnZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkXCIpO1xyXG5jb25zdCB1c2VySW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLXVzZXJcIik7XHJcblxyXG4vLyBJbnB1dHMgcGFyYSBQb3BVcCBFZGl0YXIgUGVyZmlsXHJcbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9uYW1lXCIpO1xyXG5jb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9qb2JcIik7XHJcblxyXG4vLyBFbGVtZW50b3MgZGVsIG1hcmNhZG8gYSBtb2RpZmljYXJcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2hvYmJ5XCIpO1xyXG5cclxuLy8gQXJyYXkgY29uIGZvcm11bGFyaW9zIHkgcGFyw6FtZXRyb3MgZGUgY29uZmlndXJhY2nDs25cclxuY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybVwiKSk7XHJcblxyXG4vLyBPYmpldG8gY29uIHBhcsOhbWV0cm9zIGRlIGNvbmZpZ3VyYWNpw7NuIHBhcmEgdmFsaWRhY2nDs24gZGUgZm9ybXVsYXJpb3NcclxuY29uc3QgY29uZmlnUGFyYW1ldGVycyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JTcGFuVGV4dDogXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxufTtcclxuXHJcbi8vIEFycmF5IHZhY8OtbyBwYXJhIGNhZGEgaW5zdGFuY2lhIGRlIEZvcm1WYWxpZGF0b3JcclxubGV0IG5ld1ZhbGlkYXRpb25zID0gW107XHJcblxyXG5leHBvcnQge1xyXG4gIGVkaXRQcm9maWxlQnV0dG9uLFxyXG4gIGFkZEltYWdlQnV0dG9uLFxyXG4gIHByb2ZpbGVOYW1lLFxyXG4gIHByb2ZpbGVKb2IsXHJcbiAgZm9ybUxpc3QsXHJcbiAgY29uZmlnUGFyYW1ldGVycyxcclxuICBuZXdWYWxpZGF0aW9ucyxcclxuICBuYW1lSW5wdXQsXHJcbiAgam9iSW5wdXQsXHJcbiAgdXNlckltYWdlLFxyXG59O1xyXG4iLCIvLyBJbXBvcnRhY2nDs24gZGUgaG9qYXMgZGUgZXN0aWxvc1xuaW1wb3J0IFwiLi9zdHlsZXMvaW5kZXguY3NzXCI7XG5cbi8vIEltcG9ydGFyIGNsYXNlcyB5IGNvbnN0YW50ZXMgSlNcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZUNhcmQsXG4gIGFzc2lnbkRlbGV0ZUljb24sXG4gIGFzc2lnbkxpa2VJY29uLFxuICBoYW5kbGVTZXJ2ZXJSZXF1ZXN0LFxufSBmcm9tIFwiLi91dGlscy91dGlscy5qc1wiO1xuaW1wb3J0IHtcbiAgZWRpdFByb2ZpbGVCdXR0b24sXG4gIGFkZEltYWdlQnV0dG9uLFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZUpvYixcbiAgZm9ybUxpc3QsXG4gIGNvbmZpZ1BhcmFtZXRlcnMsXG4gIG5ld1ZhbGlkYXRpb25zLFxuICBuYW1lSW5wdXQsXG4gIGpvYklucHV0LFxuICB1c2VySW1hZ2UsXG59IGZyb20gXCIuL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vLyBDb25zaWd1ZSBsYSBpbmZvcm1hY2nDs24gZGVsIHVzdWFyaW8gZGVsIHNlcnZpZG9yXG4vLyBhcGlcbmhhbmRsZVNlcnZlclJlcXVlc3Qoe1xuICByZXF1ZXN0OiBhcGkuZ2V0VXNlckluZm8oKSxcbiAgaGFuZGxlcjogKHVzZXJTZXJ2ZXJJbmZvKSA9PiB7XG4gICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSB1c2VyU2VydmVySW5mby5uYW1lO1xuICAgIHByb2ZpbGVKb2IudGV4dENvbnRlbnQgPSB1c2VyU2VydmVySW5mby5hYm91dDtcbiAgICB1c2VySW1hZ2Uub25sb2FkO1xuICAgIHVzZXJJbWFnZS5zcmMgPSB1c2VyU2VydmVySW5mby5hdmF0YXI7XG4gIH0sXG59KTtcblxuLy8gR2VuZXJhY2nDs24gZGUgaW5zdGFuY2lhIHBhcmEgUG9wVXAgZGUgaW3DoWdlbmVzXG5jb25zdCBuZXdJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BvcHVwLWltYWdlXCIpO1xubmV3SW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBHZW5lcmFjacOzbiBkZSBjYXJ0YXMgaW5pY2lhbGVzIG9idGVuaWRhcyBkZWwgc2Vydmlkb3Jcbi8vIEFjb3BsYW1pZW50byBkw6liaWwgKExvb3NlIENvdXBsaW5nKVxuaGFuZGxlU2VydmVyUmVxdWVzdCh7XG4gIHJlcXVlc3Q6IGFwaS5nZXRJbml0aWFsQ2FyZHMoKSxcbiAgaGFuZGxlcjogKGluaXRpYWxDYXJkcykgPT4ge1xuICAgIGNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgICAgIHJlbmRlcmVyOiAoY2FyZEl0ZW0pID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChcbiAgICAgICAgICAgIGNhcmRJdGVtLm5hbWUsXG4gICAgICAgICAgICBjYXJkSXRlbS5saW5rLFxuICAgICAgICAgICAgbmV3SW1hZ2VQb3B1cCxcbiAgICAgICAgICAgIGNhcmRJdGVtLl9pZFxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXdDYXJkLmdlbmVyYXRlQ2FyZCgpO1xuXG4gICAgICAgICAgLy8gSW5zZXJ0YSBlbCBuw7ptZXJvIGRlIExpa2VzIGRlc2RlIGVsIHNlcnZpZG9yXG4gICAgICAgICAgYXNzaWduTGlrZUljb24oY2FyZEl0ZW0sIGNhcmRFbGVtZW50KTtcbiAgICAgICAgICAvLyBJbnNlcnRhIMOtY29ubyBkZSBib3JyYXIgc29sYW1lbnRlIGEgdGFyamV0YXMgcHJvcGlhc1xuICAgICAgICAgIGFzc2lnbkRlbGV0ZUljb24oY2FyZEl0ZW0sIGNhcmRFbGVtZW50KTtcblxuICAgICAgICAgIGNhcmRFbGVtZW50LmlkID0gY2FyZEl0ZW0uX2lkO1xuICAgICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIFwiLnBob3Rvc1wiXG4gICAgKTtcbiAgICByZXR1cm4gY2FyZExpc3Q7XG4gIH0sXG59KS50aGVuKChjYXJkTGlzdCkgPT4ge1xuICBjYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xufSk7XG5cbi8vIEdlbmVyYWNpw7NuIGRlIGluc3RhbmNpYXMgRm9ybVZhbGlkYXRvciBwYXJhIHZhbGlkYWNpw7NuIGRlIGZvcm11bGFyaW9zXG5mb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCwgaW5kZXgpID0+IHtcbiAgbmV3VmFsaWRhdGlvbnNbaW5kZXhdID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnUGFyYW1ldGVycywgZm9ybUVsZW1lbnQpO1xufSk7XG5cbi8vIEdlbmVyYWNpw7NuIGRlIGluc3RhbmNpYSBjb24gaW5mb3JtYWNpw7NuIGRlIHVzdWFyaW9cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWU6IHByb2ZpbGVOYW1lLFxuICB1c2VySm9iOiBwcm9maWxlSm9iLFxufSk7XG5cbi8vIEdlbmVyYWNpw7NuIGRlIFBvcFVwIHBhcmEgZWRpdGFyIHBlcmZpbFxuY29uc3QgcG9wVXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHtcbiAgICBzZW5kRm9ybTogKGlucHV0VmFsdWVzKSA9PiB7XG4gICAgICBoYW5kbGVTZXJ2ZXJSZXF1ZXN0KHtcbiAgICAgICAgcmVxdWVzdDogYXBpLmVkaXRVc2VySW5mbyhpbnB1dFZhbHVlcy5uYW1lLCBpbnB1dFZhbHVlcy5hYm91dCksXG4gICAgICAgIGhhbmRsZXI6IChuZXdVc2VySW5mbykgPT4ge1xuICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKG5ld1VzZXJJbmZvLm5hbWUsIG5ld1VzZXJJbmZvLmFib3V0KTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0sXG4gIH0sXG4gIFwiI3BvcHVwLXByb2ZpbGVcIlxuKTtcbnBvcFVwUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgY3VycmVudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLm5hbWU7XG4gIGpvYklucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLmpvYjtcbiAgcG9wVXBQcm9maWxlLm9wZW4oKTtcbiAgLy8gRnVuY2nDs24gcGFyYSB2YWxpZGFjacOzbiBhbCBhYnJpciBmb3JtdWxhcmlvXG4gIG5ld1ZhbGlkYXRpb25zWzBdLmVuYWJsZVZhbGlkYXRpb24oKTtcbn0pO1xuXG4vLyBHZW5lcmFjacOzbiBkZSBQb3BVcCBwYXJhIGHDsWFkaXIgbnVldm8gUG9zdFxuY29uc3QgcG9wVXBBZGRQb3N0ID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHtcbiAgICBzZW5kRm9ybTogKGlucHV0VmFsdWVzKSA9PiB7XG4gICAgICBoYW5kbGVTZXJ2ZXJSZXF1ZXN0KHtcbiAgICAgICAgcmVxdWVzdDogYXBpLmFkZE5ld0NhcmQoaW5wdXRWYWx1ZXMubmFtZSwgaW5wdXRWYWx1ZXMubGluayksXG4gICAgICAgIGhhbmRsZXI6IChuZXdQb3N0SW5mbykgPT4ge1xuICAgICAgICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKFxuICAgICAgICAgICAgbmV3UG9zdEluZm8ubmFtZSxcbiAgICAgICAgICAgIG5ld1Bvc3RJbmZvLmxpbmssXG4gICAgICAgICAgICBuZXdJbWFnZVBvcHVwXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XG5cbiAgICAgICAgICBhc3NpZ25MaWtlSWNvbihjYXJkSXRlbSwgY2FyZEVsZW1lbnQpO1xuICAgICAgICAgIGFzc2lnbkRlbGV0ZUljb24obmV3UG9zdEluZm8sIGNhcmRFbGVtZW50KTtcblxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zXCIpLnByZXBlbmQoY2FyZEVsZW1lbnQpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSxcbiAgfSxcbiAgXCIjcG9wdXAtYWRkXCJcbik7XG5wb3BVcEFkZFBvc3Quc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZEltYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcFVwQWRkUG9zdC5vcGVuKCk7XG4gIC8vIEZ1bmNpw7NuIHBhcmEgdmFsaWRhY2nDs24gYWwgYWJyaXIgZm9ybXVsYXJpb1xuICBuZXdWYWxpZGF0aW9uc1sxXS5lbmFibGVWYWxpZGF0aW9uKCk7XG59KTtcblxuLy8gR2VuZXJhY2nDs24gZGUgUG9wVXAgcGFyYSBib3JyYXIgdGFyamV0YXNcbmNvbnN0IHBvcFVwRGVsZXRlUG9zdCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXCIjcG9wdXAtZGVsZXRlXCIsIHtcbiAgZGVsZXRlRnVuY3Rpb246IChpZCkgPT4ge1xuICAgIGhhbmRsZVNlcnZlclJlcXVlc3Qoe1xuICAgICAgcmVxdWVzdDogYXBpLmRlbGV0ZUNhcmQoaWQpLFxuICAgICAgaGFuZGxlcjogKHJlcykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfSxcbn0pO1xucG9wVXBEZWxldGVQb3N0LnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vLyBEZXRlY3RvciBkZSBldmVudG9zIHBhcmEgYm9ycmFyIGltw6FnZW5lc1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0ID09IFwicGhvdG9zX190cmFzaFwiKSB7XG4gICAgcG9wVXBEZWxldGVQb3N0Lm9wZW4oZXZ0LnRhcmdldCk7XG4gIH1cbn0pO1xuXG4vLyBHZW5lcmFjacOzbiBkZSBQb3BVcCBwYXJhIGNhbWJpYXIgRm90byBkZSBQZXJmaWxcbmNvbnN0IHBvcFVwVXNlckltYWdlID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHtcbiAgICBzZW5kRm9ybTogKGlucHV0VmFsdWVzKSA9PiB7XG4gICAgICBoYW5kbGVTZXJ2ZXJSZXF1ZXN0KHtcbiAgICAgICAgcmVxdWVzdDogYXBpLmNoYW5nZVByb2ZpbGVQaWN0dXJlKGlucHV0VmFsdWVzLnVzZXIpLFxuICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgICAgdXNlckltYWdlLnNyYyA9IGlucHV0VmFsdWVzLnVzZXI7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9LFxuICB9LFxuICBcIiNwb3B1cC11c2VyXCJcbik7XG5wb3BVcFVzZXJJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xudXNlckltYWdlLnBhcmVudE5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wVXBVc2VySW1hZ2Uub3BlbigpO1xuICAvLyBGdW5jacOzbiBwYXJhIHZhbGlkYWNpw7NuIGRlIGZvcm11bGFyaW9cbiAgbmV3VmFsaWRhdGlvbnNbMl0uZW5hYmxlVmFsaWRhdGlvbigpO1xufSk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsInRhZ05hbWUiLCJ0b1VwcGVyQ2FzZSIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxlbmd0aCIsImkiLCJ0ZXN0IiwiRXJyb3IiLCJyZXBsYWNlIiwicCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWdEYXRhIiwiZm9ybUVsZW1lbnQiLCJfY2xhc3NDYWxsQ2hlY2siLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JTcGFuVGV4dCIsImVycm9yU3BhblRleHQiLCJfZm9ybUVsZW1lbnQiLCJrZXkiLCJ2YWx1ZSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsIl9lcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29uY2F0IiwiaWQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0TGlzdCIsInNvbWUiLCJzdWJtaXRCdXR0b24iLCJfaGFzSW52YWxpZElucHV0Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiX3RoaXMiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrVmFsaWRpdHkiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zZXRFdmVudExpc3RlbmVycyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsImNsb3NlIiwiX3RoaXMyIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfaGFuZGxlRXNjQ2xvc2UiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwiX3JlZiIsInNlbmRGb3JtIiwiX2NhbGxTdXBlciIsIl9zZW5kRm9ybSIsIl9pbmhlcml0cyIsIl9pbnB1dFZhbHVlcyIsImlucHV0IiwibmFtZSIsIl9zdXBlclByb3BHZXQiLCJyZXNldCIsIl90aGlzMyIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwicGxhY2UiLCJpbWFnZSIsImFsdCIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImRlbGV0ZUZ1bmN0aW9uIiwiX2RlbGV0ZSIsImVsZW1lbnQiLCJfZWxlbWVudCIsInBhcmVudE5vZGUiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2luaXRpYWxBcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiYXBwZW5kIiwiaW5uZXJIVE1MIiwiVXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJfdXNlck5hbWUiLCJfdXNlckpvYiIsIl9pbmZvIiwiam9iIiwiYXBpIiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJsaW5rIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJ0ZXh0IiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZSIsIl90ZXh0IiwiX2ltYWdlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVMaWtlIiwiX2NhcmRTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZ2V0VGVtcGxhdGUiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsInRvZ2dsZSIsImNyZWF0ZUNhcmQiLCJwb3B1cEluc3RhbmNlIiwib3BlbiIsImhhbmRsZVNlcnZlclJlcXVlc3QiLCJyZXF1ZXN0IiwiYWRkTGlrZSIsImhhbmRsZXIiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJsaWtlcyIsInJlbW92ZUxpa2UiLCJhc3NpZ25EZWxldGVJY29uIiwiY2FyZEl0ZW0iLCJjYXJkRWxlbWVudCIsIm93bmVyIiwiX2lkIiwidHJhc2hJY29uIiwiYXNzaWduTGlrZUljb24iLCJsaWtlIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJhZGRJbWFnZUJ1dHRvbiIsInVzZXJJbWFnZSIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwiZm9ybUxpc3QiLCJjb25maWdQYXJhbWV0ZXJzIiwibmV3VmFsaWRhdGlvbnMiLCJnZXRVc2VySW5mbyIsInVzZXJTZXJ2ZXJJbmZvIiwib25sb2FkIiwibmV3SW1hZ2VQb3B1cCIsInNldEV2ZW50TGlzdGVuZXJzIiwiZ2V0SW5pdGlhbENhcmRzIiwiaW5pdGlhbENhcmRzIiwiY2FyZExpc3QiLCJnZW5lcmF0ZUNhcmQiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJpbmRleCIsInVzZXJJbmZvIiwicG9wVXBQcm9maWxlIiwiaW5wdXRWYWx1ZXMiLCJlZGl0VXNlckluZm8iLCJuZXdVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiY3VycmVudFVzZXJJbmZvIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcFVwQWRkUG9zdCIsImFkZE5ld0NhcmQiLCJuZXdQb3N0SW5mbyIsInByZXBlbmQiLCJwb3BVcERlbGV0ZVBvc3QiLCJkZWxldGVDYXJkIiwicG9wVXBVc2VySW1hZ2UiLCJjaGFuZ2VQcm9maWxlUGljdHVyZSIsInVzZXIiXSwic291cmNlUm9vdCI6IiJ9